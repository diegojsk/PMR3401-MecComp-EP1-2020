%% PMR 3401 - Mec√¢nica Computacional para Mecatr√¥nica - 2020
%  Exerc√≠cio Programa 1
%  Implementa√ß√£o de function @veiculo com as equa√ß√µes do veiculo
%
%  Autores: Diego Jun Sato Kurashima - 10274231
%           Felipe Gomes de Melo D'Elia - 10340624
%

%% Equa√ß√µes do Veiculo

function [f] = veiculo(L1, L2, L2eixo, m1, m2, uIz, R, g, veld, F1, F2)
% Vari·veis de Estado:
% thetha1 = y(1)
% thetha1' = y(2)
% thetha2 = y(3)
% thetha2' = y(4)
f = @(t,y)[   y(2,:);
             (1./((L1.^2).*L2.*R.*(m2.*cos(2.*y(1,:)-2.*y(3,:))-2.*m1-m2)))...
           .*(((L1.^2).*L2.*R.*m2.*sin(2.*y(1,:)-2.*y(3,:))).*(y(2,:).^2) ...
           + (2.*L1.*(L2.^2).*R.*m2.*sin(y(1,:)-y(3,:))).*(y(4,:).^2) ...
           + (-2.*L2.*uIz.*veld).*y(2,:)+(-2.*L1.*uIz.*veld.*cos(y(1)-y(3,:))).*y(4,:) ...
           + (-R.*L1.*(L2eixo.*F2.*sin(y(1,:)-2.*y(3,:))+2.*sin(y(1,:)).*(F1.*L2+(1/2).*L2eixo.*F2))));
             y(4,:);
             (1./((L2.^2).*R.*m2)).*((-L1.*L2.*R.*m2.*cos(y(1,:)-y(3,:)))...
           .*((1./((L1.^2).*L2.*R.*(m2.*cos(2.*y(1,:)-2.*y(3,:))-2.*m1-m2)))...
           .*(((L1.^2).*L2.*R.*m2.*sin(2.*y(1,:)-2.*y(3,:))).*(y(2,:).^2)...
           + (2.*L1.*(L2.^2).*R.*m2.*sin(y(1,:)-y(3,:))).*(y(4,:).^2)...
           + (-2.*L2.*uIz.*veld).*y(2,:)+(-2.*L1.*uIz.*veld.*cos(y(1)-y(3,:))).*y(4,:)...
           + (-R.*L1.*( L2eixo.*F2.*sin(y(1,:)-2.*y(3,:))...
           + 2.*sin(y(1,:)).*(F1.*L2 +(1/2).*L2eixo.*F2)))))...
           + (L1.*L2.*R.*m2.*sin(y(1,:)-y(3,:))).*(y(2,:).^2)...
           + (-uIz.*veld).*y(4,:)+(L2eixo.*sin(y(3,:)).*R.*F2))  ];
end